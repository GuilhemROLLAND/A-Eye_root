\hypertarget{tcp__server_8c}{}\section{Server/tcp\+\_\+server.c File Reference}
\label{tcp__server_8c}\index{Server/tcp\+\_\+server.\+c@{Server/tcp\+\_\+server.\+c}}


This file implements a tcp server on port 64000 with a thread for sending and a thread for receiving.  


{\ttfamily \#include \char`\"{}tcp\+\_\+server.\+h\char`\"{}}\\*
Include dependency graph for tcp\+\_\+server.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tcp__server_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{tcp__server_8c_a586da4866646908804a9378b486301cc}{I\+M\+G\+\_\+\+L\+E\+N\+G\+TH}~921656
\item 
\#define {\bfseries P\+O\+RT}~64000 /$\ast$! $<$Chosen port for the application$\ast$/\hypertarget{tcp__server_8c_a614217d263be1fb1a5f76e2ff7be19a2}{}\label{tcp__server_8c_a614217d263be1fb1a5f76e2ff7be19a2}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
short \hyperlink{tcp__server_8c_a55f9d2f5bcdc14b9506e7616d270266b}{Socket\+Create} (void)
\begin{DoxyCompactList}\small\item\em Create a tcp socket. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{tcp__server_8c_a0538e83943260e3c5c08d6d4675d399c}{thread\+\_\+rcv} (void $\ast$arg)
\begin{DoxyCompactList}\small\item\em Thread for tcp receive. Constantly receive and decode any incoming TC. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{tcp__server_8c_a2c7c13c109dfbd9f6a2739b815167b63}{thread\+\_\+send} (void $\ast$arg)
\begin{DoxyCompactList}\small\item\em Thread for tcp sending. Polling on flags to send whenever there is a new ack, an image is processed or manual capture. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{tcp__server_8c_ad5f96bf68589589fdf9e980bfbf8134c}{thread\+\_\+pred} (void $\ast$arg)
\begin{DoxyCompactList}\small\item\em Thread for fifo polling. Update the processed image flag whenever a positive prediction is returned. \end{DoxyCompactList}\item 
int \hyperlink{tcp__server_8c_af38650c33f1ecc12020dcfcb653448cc}{Bind\+Created\+Socket} (int h\+Socket)
\begin{DoxyCompactList}\small\item\em Bind an existing socket to a port and accepting any incoming addr. \end{DoxyCompactList}\item 
int {\bfseries main} ()\hypertarget{tcp__server_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{}\label{tcp__server_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}

\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structmainStruct}{main\+Struct} $\ast$ {\bfseries main\+\_\+s}\hypertarget{tcp__server_8c_a803a872fffb85ed89e196548f7c2f941}{}\label{tcp__server_8c_a803a872fffb85ed89e196548f7c2f941}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
This file implements a tcp server on port 64000 with a thread for sending and a thread for receiving. 

\begin{DoxyAuthor}{Author}
Thomas du Boisrouvray (\href{mailto:thomas.duboisrouvray@elsys-design.com}{\tt thomas.\+duboisrouvray@elsys-\/design.\+com}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2022-\/05-\/25
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2022 
\end{DoxyCopyright}


\subsection{Macro Definition Documentation}
\index{tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}!I\+M\+G\+\_\+\+L\+E\+N\+G\+TH@{I\+M\+G\+\_\+\+L\+E\+N\+G\+TH}}
\index{I\+M\+G\+\_\+\+L\+E\+N\+G\+TH@{I\+M\+G\+\_\+\+L\+E\+N\+G\+TH}!tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}}
\subsubsection[{\texorpdfstring{I\+M\+G\+\_\+\+L\+E\+N\+G\+TH}{IMG_LENGTH}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+M\+G\+\_\+\+L\+E\+N\+G\+TH~921656}\hypertarget{tcp__server_8c_a586da4866646908804a9378b486301cc}{}\label{tcp__server_8c_a586da4866646908804a9378b486301cc}
Lenght of a 640$\ast$480 bmp image 

\subsection{Function Documentation}
\index{tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}!Bind\+Created\+Socket@{Bind\+Created\+Socket}}
\index{Bind\+Created\+Socket@{Bind\+Created\+Socket}!tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}}
\subsubsection[{\texorpdfstring{Bind\+Created\+Socket(int h\+Socket)}{BindCreatedSocket(int hSocket)}}]{\setlength{\rightskip}{0pt plus 5cm}int Bind\+Created\+Socket (
\begin{DoxyParamCaption}
\item[{int}]{h\+Socket}
\end{DoxyParamCaption}
)}\hypertarget{tcp__server_8c_af38650c33f1ecc12020dcfcb653448cc}{}\label{tcp__server_8c_af38650c33f1ecc12020dcfcb653448cc}


Bind an existing socket to a port and accepting any incoming addr. 


\begin{DoxyParams}{Parameters}
{\em h\+Socket} & ref to the socket \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\index{tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}!Socket\+Create@{Socket\+Create}}
\index{Socket\+Create@{Socket\+Create}!tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}}
\subsubsection[{\texorpdfstring{Socket\+Create(void)}{SocketCreate(void)}}]{\setlength{\rightskip}{0pt plus 5cm}short Socket\+Create (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{tcp__server_8c_a55f9d2f5bcdc14b9506e7616d270266b}{}\label{tcp__server_8c_a55f9d2f5bcdc14b9506e7616d270266b}


Create a tcp socket. 

$<$reference to \hyperlink{struct__allocation_8h}{struct\+\_\+allocation.\+h} \index{tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}!thread\+\_\+pred@{thread\+\_\+pred}}
\index{thread\+\_\+pred@{thread\+\_\+pred}!tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}}
\subsubsection[{\texorpdfstring{thread\+\_\+pred(void $\ast$arg)}{thread_pred(void *arg)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ thread\+\_\+pred (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{arg}
\end{DoxyParamCaption}
)}\hypertarget{tcp__server_8c_ad5f96bf68589589fdf9e980bfbf8134c}{}\label{tcp__server_8c_ad5f96bf68589589fdf9e980bfbf8134c}


Thread for fifo polling. Update the processed image flag whenever a positive prediction is returned. 


\begin{DoxyParams}{Parameters}
{\em arg} & socket informations passed by pthread\+\_\+create() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void$\ast$ 
\end{DoxyReturn}
\index{tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}!thread\+\_\+rcv@{thread\+\_\+rcv}}
\index{thread\+\_\+rcv@{thread\+\_\+rcv}!tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}}
\subsubsection[{\texorpdfstring{thread\+\_\+rcv(void $\ast$arg)}{thread_rcv(void *arg)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ thread\+\_\+rcv (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{arg}
\end{DoxyParamCaption}
)}\hypertarget{tcp__server_8c_a0538e83943260e3c5c08d6d4675d399c}{}\label{tcp__server_8c_a0538e83943260e3c5c08d6d4675d399c}


Thread for tcp receive. Constantly receive and decode any incoming TC. 


\begin{DoxyParams}{Parameters}
{\em arg} & socket informations passed by pthread\+\_\+create() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void$\ast$ 
\end{DoxyReturn}
\index{tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}!thread\+\_\+send@{thread\+\_\+send}}
\index{thread\+\_\+send@{thread\+\_\+send}!tcp\+\_\+server.\+c@{tcp\+\_\+server.\+c}}
\subsubsection[{\texorpdfstring{thread\+\_\+send(void $\ast$arg)}{thread_send(void *arg)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ thread\+\_\+send (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{arg}
\end{DoxyParamCaption}
)}\hypertarget{tcp__server_8c_a2c7c13c109dfbd9f6a2739b815167b63}{}\label{tcp__server_8c_a2c7c13c109dfbd9f6a2739b815167b63}


Thread for tcp sending. Polling on flags to send whenever there is a new ack, an image is processed or manual capture. 


\begin{DoxyParams}{Parameters}
{\em arg} & socket informations passed by pthread\+\_\+create() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void$\ast$ 
\end{DoxyReturn}
